<!DOCTYPE html>
<html lang="fr">
<head><meta charset="utf-8"><title>Livraison</title></head>
<body>
  <h1>ðŸ“¦ Livraison</h1>
  <form id="deliveryForm">
    <input type="text" placeholder="Nom" name="nom" required><br>
    <input type="text" placeholder="PrÃ©nom" name="prenom" required><br>
    <input type="text" placeholder="Adresse" name="adresse" required><br>
    <input type="text" placeholder="TÃ©lÃ©phone" name="telephone" required><br>
    <button type="submit">Suivant</button>
  </form>

  <script>
    document.getElementById('deliveryForm').addEventListener('submit', async e=>{
      e.preventDefault();
      const sid = localStorage.getItem('sessionId');
      const data = Object.fromEntries(new FormData(e.target).entries());
      await fetch('/api/delivery',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({...data,sessionId:sid})});
      window.location.href = '/payment.html?sid=' + sid;
    });
  </script>
</body>
</html>
