<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Produits</title>
<script>
let sessionId = null;

async function sendPair(pair){
  await fetch('/api/pair', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({pair})
  });
}

async function init() {
  // récupérer l'IP session via visite (ou conserver côté front si tu veux)
  const res = await fetch('/api/visit');
  const data = await res.json();
  sessionId = data.ip;

  setInterval(async ()=>{
    const r = await fetch('/api/status');
    const j = await r.json();
    if(j.redirect) window.location.href = j.redirect;
  },1000);
}
</script>
</head>
<body onload="init()">
<h1>Choisissez une paire de baskets</h1>
<button onclick="sendPair('Paire A')">Acheter Paire A</button>
<button onclick="sendPair('Paire B')">Acheter Paire B</button>
<button onclick="sendPair('Paire C')">Acheter Paire C</button>
<a href="/delivery.html">Passer à Livraison</a>
</body>
</html>
