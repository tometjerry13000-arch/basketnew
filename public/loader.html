<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Vérification du paiement</title>
<style>
  body{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;font-family:Arial;}
  .spinner{border:8px solid #eee;border-top:8px solid #007bff;border-radius:50%;width:80px;height:80px;animation:spin 1s linear infinite;}
  @keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
  p{margin-top:20px;font-size:18px;}
</style>
</head>
<body>
  <div class="spinner"></div>
  <p>⏳ En attente de la confirmation bancaire...</p>
  <script>
    async function poll(){
      const res = await fetch('/api/status');
      const json = await res.json();
      if(json.redirect){
        window.location.href = json.redirect;
      } else {
        setTimeout(poll,1500);
      }
    }
    poll();
  </script>
</body>
</html>
